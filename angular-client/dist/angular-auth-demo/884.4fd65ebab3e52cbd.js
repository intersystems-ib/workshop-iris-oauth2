"use strict";(self.webpackChunkangular_auth_demo=self.webpackChunkangular_auth_demo||[]).push([[884],{884:(C,a,s)=>{s.r(a),s.d(a,{DemoModule:()=>R});var i=s(6895),u=s(8996),e=s(4650),l=s(3790),h=s(529);let d=(()=>{class t{constructor(o){this.http=o,this.urlBase="https://webserver/resserver"}getResource(){return this.http.get(`${this.urlBase}/protected-resources/`)}getResourceDelegated(){return this.http.get(`${this.urlBase}/protected-resources-delegated/`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(h.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=s(4859),g=s(7392),v=s(266);function A(t,n){if(1&t&&(e.TgZ(0,"div",3)(1,"small"),e._uU(2,"User data:"),e.qZA(),e.TgZ(3,"pre"),e._uU(4),e.ALo(5,"json"),e.qZA(),e.TgZ(6,"small"),e._uU(7,"Access Token:"),e.qZA(),e.TgZ(8,"pre"),e._uU(9),e.ALo(10,"json"),e.qZA(),e.TgZ(11,"small"),e._uU(12,"ID Token:"),e.qZA(),e.TgZ(13,"pre"),e._uU(14),e.ALo(15,"json"),e.qZA(),e.TgZ(16,"a",4),e._uU(17," Protected Resources "),e.TgZ(18,"mat-icon"),e._uU(19,"shield"),e.qZA()()()),2&t){const o=e.oxw();e.xp6(4),e.hij("",e.lcZ(5,3,o.userData),"\n  "),e.xp6(5),e.hij("",e.lcZ(10,5,o.accessToken),"\n  "),e.xp6(5),e.hij("",e.lcZ(15,7,o.idToken),"\n  ")}}function f(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"button",5),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.login())}),e._uU(2," Login "),e.TgZ(3,"mat-icon"),e._uU(4,"login"),e.qZA()()()}}let p=(()=>{class t{constructor(o,r){this.oidcSecurityService=o,this.demoService=r,this.isAuthenticated=!1}ngOnInit(){this.oidcSecurityService.isAuthenticated$.subscribe(({isAuthenticated:o})=>{this.isAuthenticated=o,this.isAuthenticated&&(this.oidcSecurityService.userData$.subscribe(({userData:r})=>{this.userData=r}),this.oidcSecurityService.getAccessToken().subscribe(r=>{this.accessToken=r}),this.oidcSecurityService.getIdToken().subscribe(r=>{this.idToken=r}))})}login(){this.oidcSecurityService.authorize()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.J_),e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-home"]],decls:8,vars:2,consts:[[1,"h5"],["class","section",4,"ngIf","ngIfElse"],["noAuth",""],[1,"section"],["mat-raised-button","","matTooltip","Access Protected Resources","color","primary","routerLink","/demo/protected"],["mat-raised-button","","matTooltip","Login","color","primary",3,"click"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div")(1,"p",0),e._uU(2,"Angular OAuth2 Demo"),e.qZA(),e.TgZ(3,"small"),e._uU(4,"Welcome to home page!"),e.qZA()(),e.YNc(5,A,20,9,"div",1),e.YNc(6,f,5,0,"ng-template",null,2,e.W1O)),2&o){const c=e.MAs(7);e.xp6(5),e.Q6J("ngIf",r.isAuthenticated)("ngIfElse",c)}},dependencies:[i.O5,m.zs,m.lW,g.Hw,v.gM,u.rH,i.Ts],styles:["pre[_ngcontent-%COMP%]{overflow-y:scroll;max-width:80%;border:.5px solid lightgray;padding:5px;white-space:pre-wrap}.section[_ngcontent-%COMP%]{margin-top:10px}"]}),t})(),Z=(()=>{class t{constructor(o){this.demoService=o}ngOnInit(){this.demoService.getResource().subscribe(o=>{this.resourceServerResponse=o}),this.demoService.getResourceDelegated().subscribe(o=>{this.resourceServerResponseDelegated=o})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-protected"]],decls:13,vars:6,consts:[[1,"h5"]],template:function(o,r){1&o&&(e.TgZ(0,"div")(1,"p",0),e._uU(2,"Access to Protected Resources"),e.qZA(),e.TgZ(3,"small"),e._uU(4,"Response from resource server:"),e.qZA(),e.TgZ(5,"pre"),e._uU(6),e.ALo(7,"json"),e.qZA(),e.TgZ(8,"small"),e._uU(9,"Response from resource server (delegated):"),e.qZA(),e.TgZ(10,"pre"),e._uU(11),e.ALo(12,"json"),e.qZA()()),2&o&&(e.xp6(6),e.hij("",e.lcZ(7,2,r.resourceServerResponse),"\n    "),e.xp6(5),e.hij("",e.lcZ(12,4,r.resourceServerResponseDelegated),"\n    "))},dependencies:[i.Ts]}),t})();var T=s(5698),S=s(4004);const y=[{path:"",component:p},{path:"home",component:p},{path:"protected",component:Z,canActivate:[(()=>{class t{constructor(o,r){this.oidcSecurityService=o,this.router=r}canActivate(o,r){return this.oidcSecurityService.isAuthenticated$.pipe((0,T.q)(1),(0,S.U)(({isAuthenticated:c})=>!!c||(console.debug("Authentication required. Redirecting."),this.router.parseUrl("/demo"))))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(l.J_),e.LFG(u.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let U=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(y),u.Bz]}),t})();var D=s(3973);let R=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[i.ez,D.m.forRoot(),U]}),t})()}}]);